# videoctl

ビデオカメラの自動同期・リネームツール

## 概要

videoctlは、接続されたビデオカメラデバイスを自動検出し、ビデオファイルをローカルディレクトリに同期するツールです。ファイルは撮影時刻（変更日時）順に自動的に連番リネームされます。

## 機能

- **自動デバイス検出**: USBシリアル番号による特定のビデオカメラの識別
- **ファイル同期**: デバイスからローカルフォルダへの高速ファイル転送
- **自動リネーム**: 撮影時刻順での連番ファイル名（00000.MTS, 00001.MTS...）
- **安全な取り出し**: 転送完了後の自動ボリューム取り出し

## 対応デバイス

- PINKデバイス (シリアル: 6CD0502F3121)
- WHITEデバイス (シリアル: 6D6C904DF4D9)

## 使用方法

### 基本的な同期

```bash
./main.sh
```

デバイスを接続してこのコマンドを実行すると、自動的にデバイスを検出し、ファイルを適切なフォルダ（pink または white）に転送します。

### ファイルのリネームのみ

既存のディレクトリ内のファイルを撮影時刻順でリネームしたい場合：

```bash
./main.sh --rename pink
./main.sh --rename white
./main.sh --rename /path/to/directory
```

### ヘルプ表示

```bash
./main.sh --help
```

## ディレクトリ構造

```
videoctl/
├── main.sh           # メインスクリプト
├── pink/             # PINKデバイスからの動画ファイル
├── white/            # WHITEデバイスからの動画ファイル
└── README.md         # このファイル
```

## ファイル名の変換例

転送前（デバイス上）:
```
00001.MTS  (2024-09-27 14:30:15)
00023.MTS  (2024-09-27 14:25:10)
00045.MTS  (2024-09-27 14:35:20)
```

転送後（撮影時刻順でリネーム）:
```
00000.MTS  (2024-09-27 14:25:10) ← 最も古い
00001.MTS  (2024-09-27 14:30:15)
00002.MTS  (2024-09-27 14:35:20) ← 最も新しい
```

## 必要な環境

- macOS
- bash
- rsync（推奨、なければcpを使用）
- system_profiler（macOS標準）

## 注意事項

- ファイル転送中はデバイスを取り外さないでください
- 既存フォルダに同名ファイルがある場合は、事前に確認プロンプトが表示されます
- デバイスは `/Volumes/Untitled/AVCHD/BDMV/STREAM` としてマウントされる必要があります

## トラブルシューティング

### デバイスが検出されない場合

1. デバイスが正しく接続されているか確認
2. 以下のコマンドでデバイス情報を確認：
   ```bash
   system_profiler SPUSBDataType | grep -A 20 "6CD0502F3121\|6D6C904DF4D9"
   ```

### 転送が失敗する場合

1. ディスクの空き容量を確認
2. デバイスのマウント状態を確認：
   ```bash
   ls -la /Volumes/
   ```

## ライセンス

このプロジェクトは個人使用目的で作成されています。